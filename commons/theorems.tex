\usepackage[framemethod=TikZ]{mdframed}

\newcommand{\definebox}[3]{%
    \newcounter{#1}
    \newenvironment{#1}[1][]{%
        \stepcounter{#1}%
        \mdfsetup{%
            frametitle={%
            \tikz[baseline=(current bounding box.east),outer sep=0pt]
            \node[anchor=east,rectangle,fill=white]
            {\strut #2~\csname the#1\endcsname\ifstrempty{##1}{}{##1}};}}%
        \mdfsetup{innertopmargin=1pt,linecolor=#3,%
            linewidth=3pt,topline=true,
            frametitleaboveskip=\dimexpr-\ht\strutbox\relax,}%
        \begin{mdframed}[]
            \relax%
            }{
        \end{mdframed}}%
}

\definebox{theorem_boxed}{Теорема}{ForestGreen!24}
\definebox{definition_boxed}{Определение}{blue!24}
\definebox{task_boxed}{Задача}{orange!24}
\definebox{paradox_boxed}{Парадокс}{red!24}

\theoremstyle{plain}
\newtheorem{theorem}{Теорема}
\newtheorem{task}{Задача}
\newtheorem{lemma}{Лемма}
\newtheorem{statement}{Утверждение}
\newtheorem{corollary}{Следствие}

\theoremstyle{remark}
\newtheorem{remark}{Замечание}
\newtheorem{example}{Пример}